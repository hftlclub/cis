<div class="page-header">
  <div class="pull-right">
    <a ng-click="save()" class="btn btn-success">
      <span class="glyphicon glyphicon-save"></span>
      Speichern
    </a>
  </div>
  <h2>Protokoll erstellen</h2>
</div>

<form class="form-horizontal" role="form" ng-submit="form.submit()">

  <div class="form-group" ng-class="{'has-error has-feedback': form.errors.title}">
    <label for="inputTitle" class="col-sm-2 control-label">Titel</label>
    <div class="col-sm-10">
      <input type="text" ng-model="form.protocolData.title" class="form-control" id="inputTitle" typeahead="title for title in commonTitles | filter:$viewValue" placeholder="Titel" tooltip-placement="right" tooltip-trigger="focus" tooltip="Sitzung? MV? Vorstand?">
      <span ng-if="form.errors.title" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
    </div>
  </div>

  <div class="form-group" ng-class="{'has-error has-feedback': form.errors.recorder}">
    <label for="inputRecorder" class="col-sm-2 control-label">Protokollführer</label>
    <div class="col-sm-10">
      <input type="text" ng-model="form.protocolData.recorder" class="form-control" id="inputRecorder" typeahead="user.firstname+' '+user.lastname for user in users.data | filter:$viewValue | limitTo:8" placeholder="Protokollführer" tooltip-placement="right" tooltip-trigger="focus" tooltip="Wer ist Protokollführer?">
      <span ng-if="form.errors.recorder" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
    </div>
  </div>

  <div class="form-group" ng-class="{'has-error has-feedback': form.errors.date}">
    <label for="inputDate" class="col-sm-2 control-label">Datum</label>
    <div class="col-md-2">
      <p class="input-group">
        <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="form.protocolData.date" is-open="openedDatepicker" datepicker-options="dateOptions" ng-required="true" close-text="Close" tooltip-placement="bottom" tooltip-trigger="focus" tooltip="Wann wurde das Protokoll erstellt?"/>
        <span class="input-group-btn">
          <button type="button" class="btn btn-default" ng-click="openDatepicker($event)"><i class="glyphicon glyphicon-calendar"></i></button>
        </span>
        <span ng-if="form.errors.date" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
      </p>
    </div>

    <label for="inputStartTimeHours" class="col-sm-2 control-label">Beginn</label>
    <div class="col-sm-1">
      <input type="text" ng-model="form.protocolData.start.hh" class="form-control" id="inputStartTimeHours" placeholder="HH">
    </div>
    <div class="col-sm-1">
        <input type="text" ng-model="form.protocolData.start.mm" class="form-control" id="inputStartTimeminutes" placeholder="MM">
    </div>
    <label for="inputEndTimeHours" class="col-sm-2 control-label">Ende</label>
    <div class="col-sm-1">
      <input type="text" ng-model="form.protocolData.end.hh" class="form-control" id="inputEndTimeHours" placeholder="HH">
    </div>
    <div class="col-sm-1">
        <input type="text" ng-model="form.protocolData.end.mm" class="form-control" id="inputEndTimeminutes" placeholder="MM">
    </div>
  </div>


  <div class="form-group" ng-class="{'has-error has-feedback': form.errors.attendants}">
    <label for="inputAttendants" class="col-sm-2 control-label">Anwesend</label>
    <div class="col-sm-10">
      <input type="text" ng-model="inputAttendee" class="form-control" id="inputAttendants" typeahead="attendee.firstname+' '+attendee.lastname for attendee in users.data | filter:$viewValue | limitTo:8" typeahead-on-select="addAttendants($item, $model, $label)" placeholder="Anwesende Mitglieder" tooltip-placement="right" tooltip-trigger="focus" tooltip="Welche Mitglieder sind anwesend?">
      <span ng-if="form.errors.attendants" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
    </div>
  </div>

  <div class="form-group" ng-class="{'has-error has-feedback': form.errors.attendants}">
    <label class="col-sm-2 control-label"></label>
    <div class="col-sm-10">
      <div class="btn-toolbar" role="toolbar" aria-label="...">
        <!-- Split button -->
        <div class="btn-group" dropdown ng-repeat="attendee in form.protocolData.attendants">
          <button type="button" class="btn btn-xs" ng-class="{'btn-success': (attendee.type == 'member'), 'btn-info': (attendee.type == 'applicant'), 'btn-default': (attendee.type == 'guest')}">{{attendee.name}}</button>
          <button type="button" class="btn btn-xs dropdown-toggle" ng-class="{'btn-success': (attendee.type == 'member'), 'btn-info': (attendee.type == 'applicant'), 'btn-default': (attendee.type == 'guest')}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" dropdown-toggle>
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li ><a ng-click="attendee.type = 'member'"><span class="glyphicon glyphicon-user"></span> Clubmitglied</a></li>
            <li ><a ng-click="attendee.type = 'applicant'"><span class="glyphicon glyphicon-user"></span> Anwärter</a></li>
            <li ><a ng-click="attendee.type = 'guest'"><span class="glyphicon glyphicon-user"></span> Gast</a></li>
            <li role="separator" class="divider"></li>
            <li><a ng-click="removeAttendee($index)"><span class="glyphicon glyphicon-remove"></span> Entfernen</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group" ng-class="{'has-error has-feedback': form.errors.candidate}">
    <label for="inputCandidate" class="col-sm-2 control-label">Gäste</label>
    <div class="col-sm-10">
      <input type="text" ng-model="form.protocolData.candidate" class="form-control" id="inputCandidate" placeholder="Max Mustermann, Erika Mustermann" tooltip-placement="right" tooltip-trigger="focus" tooltip="Stellt sich jemand dem Club vor?">
      <span ng-if="form.errors.candidate" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
    </div>
  </div>

</form>

<h4>Protokolltext (Markdown):</h4>
<div class="well well-lg" ui-ace="aceoptions" ng-model="form.protocolData.text"> kommt der Protokolltext rein.</div>

<h4>Protokolltext (Markdown):</h4>
<textarea class="form-control" ng-model="form.protocolData.comment" rows="3" placeholder="Kommentare"></textarea>
